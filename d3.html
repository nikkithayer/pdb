<html>
  <head>

<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  background: #1F2A3C;
  margin: auto;
  width: 960px;
}

.arc {
  stroke-width: 1;
  stroke: rgba(31,42,60,0.035);
  fill: none;
}

.unfilled{ fill: #1F2A3C; stroke: #1F2A3C;}

.circle{ opacity: 0.7}

.root-circle{ fill: pink; opacity: 1;}
.circle-5{ fill: #07EEB5;}
.circle-4{ fill: #13E1DD;}
.circle-3{ fill: #11BCEB;}
.circle-2{ fill: #248CE2;}
.circle-1{ fill: #7130B3;}

.root-bullseye{
  stroke: rgba(31,42,60,0.035);
  stroke-width: 1;
}
.bullseye {
  fill: #07EEB5;
  opacity: 1;
}

</style>
<script src="//d3js.org/d3.v3.min.js"></script>
  </head>
  <body>
<script>
//text doesn't show up except maybe on hover
//content fades in and out next door
//brightened selected state
//bar graph                
                                
var width = 960,
  height = 800,
  radius = Math.min(width, height) / 1.9,
  spacing = .095;
                                
d3.selection.prototype.moveToFront = function() {
  return this.each(function(){
    this.parentNode.appendChild(this);
  });
};

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var defs = svg.append("defs");

var filter = defs.append("filter")
    .attr("id", "drop-shadow")
    .attr("height", "200%")
    .attr("width", "200%");

filter.append("feGaussianBlur")
    .attr("in", "SourceAlpha")
    .attr("stdDeviation", 3.5)
    .attr("result", "blur");

filter.append("feColorMatrix")
    .attr("in","blur")
    .attr("type","matrix")
    .attr("values","1 0 0 0 0 0 1 0.1 0 0 0 0 0.7 0 0.5 0 0 0 0.3 -0.04")
    .attr("result","matrixOut");
    
filter.append("feOffset")
    .attr("in", "matrixOut")
    .attr("dx", 3.5)
    .attr("dy", 3.5)
    .attr("result", "offsetBlur");

var feMerge = filter.append("feMerge");

feMerge.append("feMergeNode")
    .attr("in", "offsetBlur")
feMerge.append("feMergeNode")
    .attr("in", "matrixOut");
feMerge.append("feMergeNode")
    .attr("in", "SourceGraphic");
    

var circles = svg.selectAll("circle")
  .data(circleRadii)
  .enter()
  .append("circle").style("filter", "url(#drop-shadow)");

var circleAttributes = circles
   .attr("cx", width/2)
   .attr("cy", height/2)
   .attr("r", function (d) { return (d.index + spacing / 2) * radius; })
   .attr("class",function(d){ return "circle " + d.class;});

var arcGroup = svg.selectAll("g")
    .data(groups)
    .enter()
    .append("g")
    .attr("data",function(d){ return d.title;})
    .attr("transform", function(d,i){ return "translate(" + width / 2 + "," + height / 2 + ") rotate("+ 30*i +")";});

/*
var newText= arcGroup.append("text")
    .attr("x", 0)
    .attr("y", 0)
    .attr("dy", "-18em")
    .text(function(d) { return d.title; })
    .attr("font-family", "sans-serif")
    .attr("font-weight", "lighter")
    .attr("font-size", "14px")
    .attr("fill", "white");
    
svg.selectAll("text")
    .data(groups)
    .attr("transform", function(d,i){ console.log(d,i); return "translate(" + 0 + "," + 0 + ") rotate("+ -30*i +")";});
*/

var arc = d3.svg.arc()
    .innerRadius(function(d,i) { return (d.index + spacing / 2) * radius; })
    .outerRadius(function(d) { return (d.index + spacing / 2); })
    .cornerRadius(0)
    .startAngle(0)
    .endAngle(0.1667 * Math.PI);

var arcP = arcGroup.selectAll("path")
    .data(fields)
    .enter()
    .append("path")
    .attr("class",function(d,i){ 
      var isFilled = Math.floor(Math.random()*4)+1;
//      console.log(d,i, isFilled);
      var unfilled = "";
      if(isFilled == i){
        unfilled = "unfilled";
        console.log(unfilled);
      }
      return "arc " + unfilled;})
    .attr("d", arc);

var bullseye = d3.selectAll(".bullseye")
    .moveToFront();

arcGroup.on("mouseover",function(){
  var sel = d3.select(this);
  console.log(sel);
});

function circleRadii() {
  return [
    {index: .5, class: "root-circle"},
    {index: .5, class: "circle-1"},
    {index: .4, class: "circle-2"},
    {index: .3, class: "circle-3"},
    {index: .2, class: "circle-4"},
    {index: .1, class: "circle-5"},
    {index: .05, class: "root-bullseye bullseye"}
  ];
}

function groups() {
  return [
    {title: "Clear roles"},
    {title: "Process"},
    {title: "Experience in software"},
    {title: "Experts in our field"},
    {title: "Clear, shared vision"},
    {title: "Talent is valued"},
    {title: "Challenge"},
    {title: "Debate & decide together"},
    {title: "MVP"},
    {title: "UVP"},
    {title: "Metrics"},
    {title: "Product/market fit"}
  ];
}

function fields() {
  return [
    {index: .5},
    {index: .4},
    {index: .3},
    {index: .2},
    {index: .1}
  ];
}


</script>
  </body>
</html>
